<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<meta name="description" content="AWStats Documentation - Setup page">
<meta name="keywords" content="awstats, awstat, vote, award, awards">
<meta name="robots" content="index,follow">
<meta name="title" content="AWStats Documentation - Setup page">
<title>AWStats Documentation - Setup page</title>
<link rel="stylesheet" href="styles.css" type="text/css">
</head>

<body topmargin=10 leftmargin=5>


<table style="font: 10pt arial,helvetica,verdana" cellpadding=0 cellspacing=0 border=0 bgcolor=#FFFFFF width=100%>

<!-- Large -->
<tr style="font: 10pt arial,helvetica,verdana">
<td bgcolor=#9999cc align=center><a href="/"><img src="images/awstats_logo1.png" border=0></a></td>
<td bgcolor=#9999cc align=center>
<br>
<font style="font: 16pt Times;" color=#EEEEFF><b>AWStats logfile analyzer 4.0 Documentation</b></font><br>
<br>
</td>
<td bgcolor=#9999cc align=center>
&nbsp;
</td>
</tr>

</table>


<br><br><font style="font: 26px Times;">Setup / Install and Run AWStats</font><br><br>

 
<br>
<b><u>1) With Apache Server (on Unix/Linux, Windows, MacOS...)</b></u><br>
<br>
* Configure your apache web server to have "combined" log format.<br>
You can do this by changing, in httpd.conf, following directives:<br>
<i>CustomLog /yourlogpath/yourlogfile common</i><br>
into<br>
<i>CustomLog /yourlogpath/yourlogfile combined</i><br>
See your apache manual for more information.<br>
Stop Apache, remove old log files and restart Apache.<br>
This is an example of records you should get in new log file:<br>
<i>62.161.78.73 - - [dd/mmm/yyyy:hh:mm:ss +0000] "GET / HTTP/1.1" 200 1234 "http://www.from.com/from.htm" "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"</i><br>
<br>
* Copy all the content of provided AWStats cgi-bin directory into your web 
server cgi-bin directory (this includes awstats.pl, awstats.model.conf,
logresolvemerge.pl and the lang and db sub-directories).<br>
<br>
* If necessary (should not with most perl interpreter), in awstats.pl file, edit the first line<br>
<i>#!/usr/bin/perl</i><br>
to reflect the path were your perl interpreter is installed.<br>
Default value works for most of Unix OS, but it also might be<br>
<i>#!/usr/local/bin/perl</i><br>
With Apache for Windows and Activeperl interpreter, it might be<br>
<i>#!c:/program files/activeperl/bin/perl</i><br>
<br>
* Move all awstats icon sub-directories into a directory readable by your
web server, for example /yourwwwroot/icon or /yourwwwroot/icons.<br>
<br>
* Copy awstats.model.conf into awstats.virtualhostname.conf or awstats.conf
(when you will run AWStats, it will first look for a config file named
awstats.virtualhostname.conf, and, if not found, will look for awstats.conf).<br>
Whatever the name you choose, this new file must be stored in<br>
- /etc/opt/awstats or /etc/awstats or /etc for unix/linux users.<br>
- same directory than awstats.pl (so cgi-bin) for Windows and other OS.<br>
Edit this new config file with your own setup :<br>
- Change "LogFile" value with full path of your web server log file (You
can also use a relative path from your awstats.pl directory).<br>
- Check if "LogFormat" has the value "1" (it means "NCSA apache combined/ELF/XLF log format").<br>
- Change "DirIcons" parameter to reflect relative URL of icon directory.<br>
- Edit "SiteDomain" parameter with the main domain name or the intranet 
web server name used to reach the web site to analyze.<br>
- You can change other parameters if you want.<br>
<br>
SETUP IS FINISHED<br>
<br>
* To update statistics, launch awstats.pl from the command line interface
like this (the first time, process may be long) :<br>
<i>awstats.pl -config=virtualhostname -update</i><br>
AWStats will read the config file (awstats.virtualhostname.conf, or, if
not found, awstats.conf) and create/update database where AWStats store
all summary information issued from analyzed log files.<br>
A log analysis process is slow (one second for each 3000 lines of your
logfile with Athlon 1Ghz, plus DNS resolution time for each different IP
address in your logfile if DNSLookup=1).<br>
See <a href="awstats_benchmark.html">Benchmark page</a> for more accurate information.<br>
<br>
* Add instructions in your crontab (Unix/Linux) or your scheduler (for
Windows), to launch frequently this Awstats update process.<br>
For sites with:<br>
- 10,000 visitors a month     Launch AWStats every day<br>
- 50,000 visitors a month     Launch AWStats every 4 hours<br>
- 250,000 visitors a month    Launch AWStats every hour<br>
- 1,000,000 visitors a month  Launch AWStats every hour<br>
This is ABSOLUTELY necessary to keep good performances.<br>
See AWStats <a href="awstats_benchmark.html">Benchmark page</a> for more accurate information.<br>
<br>
* To see results of analyze, you can build a HTML report from the command line, like this :<br>
<i>awstats.pl -config=virtualhostname -output > result.html</i><br>
Or, you can view dynamically your statistics from a browser. For this,
if you named your config file awstats.conf, just use URL:<br>
<i>http://www.myserver.mydomain/cgi-bin/awstats.pl</i>
If you named your config file awstats.virtualhostname.conf, use URL:<br>
<i>http://www.myserver.mydomain/cgi-bin/awstats.pl?config=virtualhost</i>
where virtualhostname is used to know which config file to use (AWStats
will use awstats.virtualhostname.conf file).<br>
<br>
<br>
<br>
<b><u>2) With IIS Server</b></u><br>
<br>
* Configure IIS to log in "Extended W3C log format" (You can still use
your own log format but setup is easier if made like suggested). So, for
this, start the IIS Snap-in, select the web site and look at its
Properties. Choose W3C Extended Log Format, then Properties, then the
Tab Extended Properties and uncheck everything under Extended Properties.<br>
Once they are all unchecked, check all following fields:<br>
<i>
date<br>
time<br>
c-ip<br>
cs-username<br>
cs-method<br>
cs-uri-stem<br>
sc-status<br>
sc-bytes<br>
cs-version<br>
cs(User-Agent)<br>
cs(Referer)<br>
</i>
Stop IIS, remove old log files and restart IIS.<br>
This is an example of records you should get in new log file:<br>
<i>2000-07-19 14:14:14 62.161.78.73 - GET / 200 1234 HTTP/1.1 Mozilla/4.0+(compatible;+MSIE+5.01;+Windows+NT+5.0) http://www.from.com/from.htm</i>
<br>
* Copy all the content of provided AWStats cgi-bin directory into your web
server cgi-bin directory (this includes awstats.pl, awstats.model.conf,
logresolvemerge.pl and the lang and db sub-directories).<br>
<br>	
* Move all awstats icon sub-directories into a directory readable by your
web server, for example C:\yourwwwroot\icon.<br>
<br>
* Copy awstats.model.conf into awstats.virtualhostname.conf or awstats.conf
(when you will run AWStats, it will first look for a config file named
awstats.virtualhostname.conf, and, if not found, will look for awstats.conf).<br>
Whatever the name you choose, this new file must be stored in<br>
- same directory than awstats.pl (so cgi-bin)<br>
Edit this new config file with your own setup :<br>
- Change "LogFile" value with full path of your web server log file (You
can also use a relative path from your awstats.pl directory).<br>
- Change "LogFormat" to value "2" (it means "IIS W3C log format").<br>
- Change "DirIcons" parameter to reflect relative URL of icon directory.<br>
- Edit "SiteDomain" parameter with the main domain name or the intranet
web server name used to reach the web site to analyze.<br>
- You can change other parameters if you want.<br>
<br>
SETUP IS FINISHED<br>
<br>
* To update statistics, launch awstats.pl from the command line interface
like this (the first time, process may be long) :<br>
<i>awstats.pl -config=virtualhostname -update</i><br>
AWStats will read the config file (awstats.virtualhostname.conf, or, if
not found, awstats.conf) and create/update database where AWStats store
all summary information issued from analyzed log files.<br>
A log analysis process is slow (one second for each 3000 lines of your
logfile with Athlon 1Ghz, plus DNS resolution time for each different IP
address in your logfile if DNSLookup=1).<br>
See <a href="awstats_benchmark.html">Benchmark page</a> for more accurate information.<br>
<br>
* Add instructions in a task scheduler to launch frequently this Awstats
update process.<br>
For sites with:<br>
- 10,000 visitors a month     Launch AWStats every day<br>
- 50,000 visitors a month     Launch AWStats every 4 hours<br>
- 250,000 visitors a month    Launch AWStats every hour<br>
- 1,000,000 visitors a month  Launch AWStats every hour<br>
This is ABSOLUTELY necessary to keep good performances.<br>
See AWStats <a href="awstats_benchmark.html">Benchmark page</a> for more accurate information.<br>
<br>
!!! Warning, with IIS, Windows doesn't let AWStats to purge log file
after processing it, so it's very important you purge/rotate your log
file yourself (or setup IIS to do it).<br>
The more often you clean your log file, the more faster AWStats will be.<br>
<br>
* To see results of analyze, you can build a HTML report from the command
line, like this :<br>
<i>awstats.pl -config=virtualhostname -output > result.html</i><br>
Or, you can view dynamically your statistics from a browser. For this,
if you named your config file awstats.conf, just use URL:<br>
<i>http://www.myserver.mydomain/cgi-bin/awstats.pl</i><br>
If you named your config file awstats.virtualhostname.conf, use URL:<br>
<i>http://www.myserver.mydomain/cgi-bin/awstats.pl?config=virtualhostname</i><br>
where virtualhostname is used to know which config file to use (AWStats
will use awstats.virtualhostname.conf file).<br>
<br>

<br>
<b><u>3) With other web servers</b></u><br>
<br>
Setup process is similar to setup for Apache or IIS.<br>
<br>


<hr>

<script language=javascript>
	var lastmod = new Date(document.lastModified);
	if (lastmod.getDate() > 0) {
		if (lastmod.getDate()<10) zerod="0"
		else zerod="";
		if (lastmod.getMonth()<9) zerom="0"
		else zerom=""
		year2kok=lastmod.getYear();
		if (year2kok<100) year2kok+=2000;
		if ((year2kok>=100) && (year2kok < 1970)) year2kok+=1900;
		document.writeln("Last revision: "+year2kok+"-"+zerom+(lastmod.getMonth()+1)+"-"+zerod+lastmod.getDate());
	}
</script>

</body>
</html>
